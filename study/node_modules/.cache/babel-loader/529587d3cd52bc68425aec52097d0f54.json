{"ast":null,"code":"import config from '@/../config';\nimport { create } from 'ipfs-http-client';\nimport { Buffer } from 'buffer';\nexport default {\n  props: ['toggle', 'emailsession', 'emails'],\n\n  data() {\n    return {\n      file: \"\",\n      //logo\n      files: \"\",\n      projectId: '2DBOP6lMpJJXMfPYTHHbUprAtAA',\n      projectSecret: 'c47db02a18967d4b6b1758b83a53ffb8',\n      token: \"\"\n    };\n  },\n\n  mounted() {\n    this.token = localStorage.getItem(\"token\");\n  },\n\n  methods: {\n    async uploadToIpfs(file) {\n      const auth = 'Basic ' + Buffer.from(this.projectId + ':' + this.projectSecret).toString('base64');\n      const client = await create({\n        host: 'ipfs.infura.io',\n        port: 5001,\n        protocol: 'https',\n        headers: {\n          authorization: auth\n        }\n      });\n      const added = await client.add(file);\n      const url = `https://abroadstudy.infura-ipfs.io/ipfs/${added.path}`;\n      return url;\n    },\n\n    async updateinfo() {\n      var select = document.getElementById(\"chkmain\");\n      var selectedValue = select.options[select.selectedIndex].value; ////console.log(\"Email is  : \"+ this.emails)\n\n      this.instname = document.getElementById('institutename').value;\n      this.web = document.getElementById('websitelink').value;\n      this.contno = document.getElementById('Contactno').value;\n      this.detail = document.getElementById('Detail').value;\n      this.fname = document.getElementById('Firstname').value;\n      this.lname = document.getElementById('Lastname').value;\n      this.design = document.getElementById('Designation').value;\n      this.qrank = document.getElementById('Qsworldranking').value;\n      this.frank = document.getElementById('Forbestranking').value;\n      this.trank = document.getElementById('Timeshighereducationranking').value;\n      this.ltitle = document.getElementById('Locationtitle').value;\n      this.lcountry = document.getElementById('Locationcountry').value;\n      this.lcity = document.getElementById('Locationcity').value;\n      this.address = document.getElementById('Fulladdress').value;\n\n      if (this.selectedValue != \"\" && this.instname != \"\" && this.web != \"\" && this.contno != \"\" && this.detail != \"\" && this.fname != \"\" && this.lname != \"\" && this.design != \"\" && this.qrank != \"\" && this.frank != \"\" && this.trank != \"\" && this.ltitle != \"\" && this.lcountry != \"\" && this.lcity != \"\" && this.address != \"\") {\n        await this.axios.put(config.hostname + 'api/Instituteinfo/Putbyemail/', {\n          institutename: this.instname,\n          country: selectedValue,\n          websitelink: this.web,\n          Email: this.emails,\n          Detail: this.detail,\n          Firstname: this.fname,\n          Lastname: this.lname,\n          Designation: this.design,\n          Qsworldranking: this.qrank,\n          Forbestranking: this.frank,\n          Timeshighereducationranking: this.trank,\n          Locationtitle: this.ltitle,\n          Locationcountry: this.lcountry,\n          Locationcity: this.lcity,\n          Fulladdress: this.address,\n          Contactno: this.contno\n        }, {\n          headers: {\n            Accept: 'application/json',\n            'Content-type': 'application/json',\n            Authorization: `Bearer ${this.token}`\n          }\n        }).then(response => {\n          alert(response.data);\n        });\n        var url = await this.uploadToIpfs(this.file); //console.log(\"Url from Ads Uni\");\n        //console.log(url);\n        ////console.log(this.file)\n\n        if (this.file != \"\") {\n          const fd = new FormData();\n          fd.append(\"email\", this.emails);\n          fd.append('Coverpicurlbase64', url); ////console.log(fd)\n\n          await this.axios.post(config.hostname + 'api/Instituteinfo/savepiccover/', fd, {\n            headers: {\n              Accept: 'application/json',\n              'Content-type': 'application/json',\n              Authorization: `Bearer ${this.token}`\n            }\n          }).then(res => {\n            res; //alert(res.data)\n          });\n        }\n\n        var url2 = await this.uploadToIpfs(this.files); //console.log(\"Url from Ads Uni\");\n        //console.log(url2);\n        ////console.log(this.files)\n\n        if (this.files != \"\") {\n          const fd = new FormData();\n          fd.append(\"email\", this.emails);\n          fd.append('mainpicurlbase64', url2); ////console.log(fd)\n\n          await this.axios.post(config.hostname + 'api/Instituteinfo/savepicmain/', fd, {\n            headers: {\n              Accept: 'application/json',\n              'Content-type': 'application/json',\n              Authorization: `Bearer ${this.token}`\n            }\n          }).then(res => {\n            res; // alert(res.data)\n          });\n        }\n      } else {\n        alert(\"All Fields are Required!\");\n      }\n    },\n\n    onPickFile() {\n      this.$refs.fileInput.click();\n    },\n\n    onFilePicked(event) {\n      //coverpic\n      this.file = event.target.files[0];\n    },\n\n    onFilePicked1(event) {\n      //mainpic\n      this.files = event.target.files[0];\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["config","create","Buffer","props","data","file","files","projectId","projectSecret","token","mounted","localStorage","getItem","methods","uploadToIpfs","auth","from","toString","client","host","port","protocol","headers","authorization","added","add","url","path","updateinfo","select","document","getElementById","selectedValue","options","selectedIndex","value","instname","web","contno","detail","fname","lname","design","qrank","frank","trank","ltitle","lcountry","lcity","address","axios","put","hostname","institutename","country","websitelink","Email","emails","Detail","Firstname","Lastname","Designation","Qsworldranking","Forbestranking","Timeshighereducationranking","Locationtitle","Locationcountry","Locationcity","Fulladdress","Contactno","Accept","Authorization","then","response","alert","fd","FormData","append","post","res","url2","onPickFile","$refs","fileInput","click","onFilePicked","event","target","onFilePicked1"],"sourceRoot":"","sources":["/Users/madukadu/Github/Study abroad/studyabroad/study/src/components/UniProfile.vue"],"sourcesContent":["<template> \n<div class=\"col-md-12 col-lg-12\">\n<div class=\"main-card mb-3 card\">\n\n<div class=\"card-body\">\n<div  v-for=\"d in emailsession\" :key=\"d\" >\n<div class=\"app-main__inner\">\n<form class=\"\">\n      \n    <h3 class=\"mb-3\"><b>Institute Information</b></h3>\n    <div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">University Name:<i style=\"color:red\">*</i></label>\n    <div class=\"col-sm-9\"><input id=\"institutename\" v-model=\"d.institutename\" placeholder=\"Enter University Name\"  class=\"form-control\" required></div>\n    </div>\n    <div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Website:<i style=\"color:red\">*</i></label>\n    <div class=\"col-sm-9\"><input id=\"websitelink\" v-model=\"d.websitelink\"  placeholder=\"Enter Website\" class=\"form-control\" required></div>\n    </div>\n    <div class=\"position-relative row form-group\"><label for=\"exampleSelect\" class=\"col-sm-3 col-form-label\">Select Country</label>\n    <div class=\"col-sm-9\">\n    <select name=\"select\" id=\"chkmain\" class=\"form-control\">\n    <option id=\"ckh1\" value=\"Select Country\">Select Country</option>\n    <option id=\"chk2\" value=\"Pakistan\">Pakistan</option>\n    <option id=\"chk3\" value=\"canada\">canada</option>\n    <option id=\"chk4\" value=\"India\">India</option>\n    </select></div>\n    </div>\n    </form>\n</div>\n\n<div class=\"position-relative row form-group mt-2\">\n<div class=\"col-12 mt-2\">\n <form method=\"post\">\n      <textarea style=\"width:100%\" rows=\"5\" id=\"Detail\" v-model=\"d.Detail\"></textarea>\n    </form>\n</div>\n</div>\n<h3 class=\"mb-3\"><b>Contact Information</b></h3>\n<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">First Name:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Firstname\" v-model=\"d.Firstname\"  placeholder=\"First Name\"  class=\"form-control\" required></div>\n</div>\n<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Last Name:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Lastname\" v-model=\"d.Lastname\"  placeholder=\"Last Name\"  class=\"form-control\" required></div>\n </div>\n<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Mobile Number:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Contactno\" v-model=\"d.Contactno\"  placeholder=\"Enter Mobile Number\" class=\"form-control\" required></div>\n </div>\n<div class=\"position-relative row form-group\"><label for=\"exampleEmail\" class=\"col-sm-3 col-form-label\">Designation:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Designation\" v-model=\"d.Designation\" name=\"email\"  placeholder=\"Enter Your Designation\" type=\"email\" class=\"form-control\" required></div>\n</div>\n<div class=\"position-relative row form-group mt-2\"><label for=\"exampleFile\" class=\"col-sm-2 col-form-label\" >Upload Your Cover Logo:</label>\n<div class=\"col-sm-10\"><input id=\"upload-pic-cover\" name=\"files\" ref=\"fileInput\" accept=\"image/*\" @change=\"onFilePicked($event)\" type=\"file\" class=\"form-control-file\" required>\n<br>\n</div>\n</div>\n<div class=\"position-relative row form-group mt-2\"><label for=\"exampleFile\" class=\"col-sm-2 col-form-label\" >Upload Your Company Logo:</label>\n<div class=\"col-sm-10\"><input id=\"upload-pic-logo\" name=\"file\" ref=\"fileInput\" accept=\"image/*\" @change=\"onFilePicked1($event)\" type=\"file\" class=\"form-control-file\" required>\n</div>\n</div>\n<div class=\"position-relative row form-check\">\n<div class=\"col-sm-2 offset-sm-5 mt-4\">\n</div>\n</div>\n<h3 class=\"mb-3 mt-4\"><b>WorldWide University Ranking</b></h3>\n<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">QS World Ranking:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Qsworldranking\" v-model=\"d.Qsworldranking\"  placeholder=\"Type Here\"  class=\"form-control\" type=\"text\" required></div>\n </div>\n<div class=\"position-relative row form-group\"><label for=\"exampleEmail\" class=\"col-sm-3 col-form-label\">Forbest Ranking:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Forbestranking\" v-model=\"d.Forbestranking\" placeholder=\"Type Here\"  class=\"form-control\" type=\"text\" required></div>\n</div>\n<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Times Higher Education Ranking:<i style=\"color:red\">*</i></label>\n<div class=\"col-sm-9\"><input id=\"Timeshighereducationranking\" v-model=\"d.Timeshighereducationranking\" placeholder=\"Type Here\"  class=\"form-control\" type=\"text\" required></div>\n </div>\n<div class=\"position-relative row form-check\">\n<div class=\"col-sm-2 offset-sm-5\">\n</div>\n</div>\n        <h3 class=\"mb-3 mt-4\"><b>Location</b></h3>\n\t\t<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Location Title:<i style=\"color:red\">*</i></label>\n\t\t\t<div class=\"col-sm-9\">\n\t\t\t\t<input id=\"Locationtitle\" v-model=\"d.Locationtitle\" placeholder=\"Provide a title for this university location\"  class=\"form-control\" type=\"text\" required>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"position-relative row form-group\"><label for=\"examplePassword\" class=\"col-sm-3 col-form-label\">Location Country:<i style=\"color:red\">*</i></label>\n\t\t\t<div class=\"col-sm-9\"><input id=\"Locationcountry\" v-model=\"d.Locationcountry\" placeholder=\"Type Country\"  class=\"form-control\" type=\"text\" required></div>\n\t\t</div>\n\t\t<div class=\"position-relative row form-group\">\n\t\t\t<label for=\"exampleEmail\" class=\"col-sm-3 col-form-label\">Location City:<i style=\"color:red\">*</i></label>\n\t\t\t<div class=\"col-sm-9\"><input id=\"Locationcity\" v-model=\"d.Locationcity\" placeholder=\"Type City\"  class=\"form-control\" type=\"text\" required></div>\n\t\t</div>\n\t\t<div class=\"position-relative row form-group\">\n\t\t\t<label for=\"exampleEmail\" class=\"col-sm-3 col-form-label\">Full Address:<i style=\"color:red\">*</i></label>\n\t\t\t<div class=\"col-sm-9\"><input id=\"Fulladdress\" v-model=\"d.Fulladdress\" placeholder=\"Type Address\"  class=\"form-control\" type=\"text\" required></div>\n\t\t</div>\n\t\t<div class=\"position-relative row form-check\">\n\t\t\t<div class=\"col-sm-2 offset-sm-5\">\n\t\t\t\t<button v-on:click.prevent=\"updateinfo\" class=\"btn btn-secondary\">Updata Data</button>\n\t\t\t</div>\n\t\t</div>\n</div>\n</div>\n</div>\n</div>\n</template>\n<script>\nimport config from '@/../config'\nimport { create } from 'ipfs-http-client';\nimport { Buffer } from 'buffer';\nexport default {\n    props: ['toggle','emailsession','emails'],\n    data () {\n        return {\n            file:\"\",     //logo\n            files:\"\",\n            \n            \n            projectId: '2DBOP6lMpJJXMfPYTHHbUprAtAA',\n            projectSecret : 'c47db02a18967d4b6b1758b83a53ffb8',\n            token:\"\"\n        }\n    },\n    mounted () { \n      this.token=localStorage.getItem(\"token\");\n       \n    },\n    methods: {\n      async uploadToIpfs(file){\n        \n        const auth ='Basic ' + Buffer.from(this.projectId + ':' + this.projectSecret).toString('base64')\n\n        const client = await create({\n            host: 'ipfs.infura.io',\n            port: 5001,\n            protocol: 'https',\n            headers: {\n            authorization: auth\n            }\n        })\n        const added = await client.add(file)\n        const url = `https://abroadstudy.infura-ipfs.io/ipfs/${added.path}`\n        return url\n    }, \n        async updateinfo() {\n          \n            var select = document.getElementById(\"chkmain\");\n            var selectedValue = select.options[select.selectedIndex].value\n            ////console.log(\"Email is  : \"+ this.emails)\n            this.instname = document.getElementById('institutename').value\n            this.web = document.getElementById('websitelink').value\n            this.contno = document.getElementById('Contactno').value\n            this.detail = document.getElementById('Detail').value\n            this.fname = document.getElementById('Firstname').value\n            this.lname = document.getElementById('Lastname').value\n            this.design = document.getElementById('Designation').value\n            this.qrank = document.getElementById('Qsworldranking').value\n            this.frank = document.getElementById('Forbestranking').value\n            this.trank = document.getElementById('Timeshighereducationranking').value\n            this.ltitle = document.getElementById('Locationtitle').value\n            this.lcountry = document.getElementById('Locationcountry').value\n            this.lcity = document.getElementById('Locationcity').value\n            this.address = document.getElementById('Fulladdress').value    \n            if(this.selectedValue != \"\" && this.instname!= \"\" && this.web!= \"\" && this.contno!= \"\" && this.detail!= \"\" && this.fname!= \"\" && this.lname!= \"\" && this.design!= \"\" && this.qrank!= \"\" && this.frank != \"\" && this.trank != \"\" && this.ltitle != \"\" && this.lcountry != \"\" && this.lcity != \"\" && this.address != \"\")\n            {\n                      \n            await this.axios.put(config.hostname+'api/Instituteinfo/Putbyemail/', {\n            institutename: this.instname,\n            country: selectedValue,\n            websitelink: this.web,\n            Email: this.emails,\n            Detail: this.detail,\n            Firstname: this.fname,\n            Lastname: this.lname,\n            Designation: this.design,\n            Qsworldranking: this.qrank,\n            Forbestranking: this.frank,\n            Timeshighereducationranking: this.trank,\n            Locationtitle: this.ltitle,\n            Locationcountry: this.lcountry,\n            Locationcity: this.lcity,\n            Fulladdress: this.address,\n            Contactno: this.contno\n            \n        },\n      {headers:{\n        Accept: 'application/json',\n        'Content-type':'application/json',\n        Authorization:`Bearer ${this.token}`\n      }})\n          .then((response) => {\n            alert(response.data)\n          })\n          var url= await this.uploadToIpfs(this.file);\n            //console.log(\"Url from Ads Uni\");\n            //console.log(url);\n         ////console.log(this.file)\n          if(this.file != \"\"){\n             const fd =new FormData()\n            fd.append(\"email\",this.emails)\n            fd.append('Coverpicurlbase64', url)\n            ////console.log(fd)\n            await this.axios.post(config.hostname+'api/Instituteinfo/savepiccover/',fd,\n      {headers:{\n        Accept: 'application/json',\n        'Content-type':'application/json',\n        Authorization:`Bearer ${this.token}`\n      }})\n            .then(res => {\n              res\n                //alert(res.data)\n            })\n          }\n          var url2= await this.uploadToIpfs(this.files);\n            //console.log(\"Url from Ads Uni\");\n            //console.log(url2);\n        ////console.log(this.files)\n          if(this.files != \"\"){\n             const fd =new FormData()\n            fd.append(\"email\",this.emails)\n            fd.append('mainpicurlbase64', url2)\n            ////console.log(fd)\n            await this.axios.post(config.hostname+'api/Instituteinfo/savepicmain/',fd,\n      {headers:{\n        Accept: 'application/json',\n        'Content-type':'application/json',\n        Authorization:`Bearer ${this.token}`\n      }})\n            .then(res => {\n              res\n               // alert(res.data)\n            })\n          }\n            }else\n            {\n              alert(\"All Fields are Required!\")\n            }\n        },\n        onPickFile () {\n                this.$refs.fileInput.click()\n        },\n        onFilePicked (event) {//coverpic\n        this.file = event.target.files[0]\n        },onFilePicked1 (event) {//mainpic\n        this.files = event.target.files[0]\n        }\n    }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}